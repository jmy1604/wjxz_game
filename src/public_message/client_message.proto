syntax = "proto3";

package msg.client_message;

//////////////////////////////////////错误码///////////////////////////////////

enum E_ERR {
	NONE    								= 0;
	INTERNAL								= -1; // 内部错误
	PLAYER_ACC_OR_PASSWORD_ERROR			= -2; // 账号或密码错误
	PLAYER_NOT_EXIST						= -3; // 玩家不存在
	PLAYER_ALREADY_LOGINED					= -4; // 玩家已经登陆
	PLAYER_OTHER_PLACE_LOGIN				= -5; // 玩家在其他地方登陆
	PLAYER_TOKEN_ERROR						= -6; // 令牌错误
	PLAYER_SELECT_SERVER_NOT_FOUND			= -7; // 选择服务器不存在
	PLAYER_ALREADY_SELECTED_SERVER			= -8; // 玩家已经选择过服务器
	
	// 玩家
	PLAYER_ALREADY_ZAN_TODAY 				= -100000; // 今天已经赞过
	PLAYER_RENAME_NEW_CANT_SAME_TO_OLD 		= -100001; // 昵称不能与原来相同
	PLAYER_RENAME_NEW_CANT_EMPTY			= -100002; // 新昵称不能为空
	PLAYER_RENAME_REMOVE_OLD_FAILED 		= -100003; // 旧昵称删除失败
	PLAYER_RENAME_TOO_LONG_NAME				= -100004; // 新昵称太长
	PLAYER_RENAME_NOT_ENOUGH_DIAMOND		= -100005; // 改昵称钻石不足
	
	CHARGE_ORDER_DATA_EMPTY                 = -200000;
	CHARGE_ORDER_DATA_INVALID				= -200001;
	CHARGE_ORDER_SIGNATURE_INVALID			= -200002;
	CHARGE_ORDER_SN_EMPTY					= -200003;
	CHARGE_ORDER_SN_ALREDY_USED				= -200004;
	CHARGE_ORDER_VERIFY_FAILED				= -200005;
	
	FRIEND_MESSAGE_NUM_MAX					= -300000;
	FRIEND_NO_UNREAD_MESSAGE				= -300001;
	FRIEND_THE_PLAYER_ALREADY_FRIEND		= -300002;
	FRIEND_THE_PLAYER_REQUESTED				= -300003;
	FRIEND_REMOVE_FRIEND_FAILED				= -300004;
	FRIEND_GIVE_POINTS_FREQUENTLY			= -300005;
	FRIEND_TOO_MANY_FRIEND_GIVE_POINTS		= -300006;
	FRIEND_GIVE_POINTS_MAX_NUM_LIMIT		= -300007;
	FRIEND_NO_THE_FRIEND					= -300008;
	FRIEND_MESSAGE_TOO_LONG					= -300009;
	FRIEND_CHAT_FAILED						= -300010;
	
	SHOP_NOT_FOUND							= -400000;
	SHOP_PURCHASED_FAILED					= -400001;
	SHOP_ITEM_NOT_FOUND						= -400002;
	SHOP_LIMITED_TYPE_INVALID				= -400003;
	SHOP_ITEM_NOT_ENOUGH					= -400004;
	
	// 任务错误码
	TASK_NOT_FOUND				= -101600; // 任务不存在
	TASK_NOT_COMPLETE				= -101601; // 任务未完成
	TASK_NOT_REWARD				= -101602; // 未领奖
	TASK_ALREADY_REWARDED			= -101603; // 已领奖
	TASK_LEVEL_NOT_ENOUGH			= -101604; // 等级不足
	TASK_PREV_NOT_COMPLETE		= -101605; // 前置任务未完成
	
	// 世界聊天
	WORLDCHAT_SEND_MSG_COOLING_DOWN   = -102300; // 世界聊天发送消息还在冷却中
	WORLDCHAT_SEND_MSG_BYTES_TOO_LONG = -102301; // 世界聊天消息超长
	WORLDCHAT_CANT_SEND_WITH_NO_FREE	= -102302; // 世界聊天内部错误没有空闲的节点
	WORLDCHAT_PULL_COOLING_DOWN       = -102303; // 世界聊天拉取消息还在冷却中
	WORLDCHAT_SEND_MSG_BE_FORBIDEN    = -102304; // 你被禁言了
}

////////////////////////////////////end////////////////////////////////////////

// 测试用消息
message C2S_TEST_COMMAND {
	string cmd 			= 1;
	repeated string args = 2;
}
///////////////////////////////////////end////////////////////////////////////

// 物品
message ItemInfo {
	int32 ItemCfgId 	= 1; // 配置物品
	int32 ItemNum 		= 2; // 物品数目
	int32 RemainSeconds = 3; // 物品剩余时间
}

// 好友信息
message FriendInfo {
	int32 PlayerId 			= 1; // 好友玩家Id
	string Name 			= 2; // 好友昵称
	string Head 			= 3; // 好友头像
	int32 Level 			= 4; // 等级
	int32 VipLevel 			= 5; // vip等级
	int32 LastLogin 		= 6; // 上次登录时间
	int32 FriendPoints 		= 7; // 友情点
	int32 LeftGiveSeconds 	= 8; // 剩余赠送时间
	int32 UnreadMessageNum 	= 9; // 未读消息数量
	int32 Zan				= 10; // 赞
	bool IsZanToday			= 11; // 今天是否赞过
	bool IsOnline			= 12; // 是否在线
	int32 FosteredCatNum  	= 14; // 已派遣猫数
	int32 CanFosterCatNum  	= 15; // 可派遣猫数
}

message PlayerStageInfo {
	int32 PlayerId 			= 1; // 玩家Id
	int32 Score 			= 2; // 我的积分
	string Name 			= 3; // 玩家名称
	int32 Lvl 				= 4; // 玩家等级
	string Icon 			= 5; // 玩家图标
	string CustomIcon 		= 6; // 玩家自定义图标
}

message S2CStagePass {
	int32 StageId 						= 1; // 关卡Id
	int32 Stars 						= 2; // 通关星星
	int32 Score 						= 3; // 通关积分
	int32 TopScore 						= 4; // 最高积分
	repeated ItemInfo UseItems 			= 5; // 使用的物品
	int32 GetCoin 						= 6; // 获取的金币
	repeated ItemInfo Getitems 			= 7; // 获得的物品
	repeated PlayerStageInfo RankItems 	= 8; // 排行榜信息
	repeated PlayerStageInfo FriendItems = 9; // 好友信息
	int32 Result 						= 12; // 通关结果  0 失败  1 过关
	repeated ItemInfo GetitemsFirst 	= 13; // 获得的首通奖励
	repeated ItemInfo Getitems3Star 	= 14; // 获得的首次3星奖励
	int32 CatExtraAddCoin				= 15; // 消除能力额外获得的金币
}

// 登陆
message C2SLoginRequest {
	string Acc 						= 1; // 账号
	string Password					= 2; // 密码
	string Channel 					= 3; // 渠道
}
// 服务器信息
message ServerInfo {
	int32 Id 						= 1;
	string Name						= 2;
	string IP						= 3;
}
// 登陆返回
message S2CLoginResponse {
	string Acc 						= 1; // 账号
	string Token 					= 2; // 令牌
	repeated ServerInfo Servers 	= 3; // 服务器列表, key是服务器ID
}
/// 其它地方登录
message S2COtherPlaceLogin {
}

// 选择服务器
message C2SSelectServerRequest {
	string Acc						= 1; // 账号
	string Token					= 2; // 令牌
	int32 ServerId					= 3; // 服务器ID
}
// 选择服务器返回
message S2CSelectServerResponse {
	string Acc						= 1; // 账号
	string Token					= 2; // 进入游戏服务器的令牌
	string IP						= 3; // 游戏服务器地址
}

///////////////////////////////////start///////////////////////////////////////

message C2S_MSG_DATA {
	int32 PlayerId 		= 1;
	string Token 		= 2;
	int32 MsgCode 		= 3;
	bytes Data 			= 4;
}

message S2C_MSG_DATA {
	int32 ErrorCode 	= 1;
	string ErrorMsg 	= 2;
	bytes Data 			= 3;
}

//////////////////////////////////////////////////////////////////////////////

// 进入游戏服务器
message C2SEnterGameRequest {
	string Acc						= 1;
	string Token					= 2;
}
// 返回
message S2CEnterGameResponse {
	string Acc						= 1;
	int32 PlayerId					= 2;
}
// 通知客户端进入游戏服务器完成
message S2CEnterGameCompleteNotify {
}


// 按昵称查找好友信息
message C2SFriendSearch {
	string Key 			= 1; // 搜索内容
}

// 按ID查找好友
message C2SFriendSearchById {
	int32 PlayerId 		= 1; //玩家ID
}

// 返回好友信息
message S2CFriendSearchResult {
	repeated FriendInfo Result 		= 1; // 搜索结果
}

// 客户端向服务器获取好友相关列表
message C2SGetFriendList {
	bool HasFoster			= 1; // 是否获取寄养信息
}

// 加好友请求信息
message FriendReq {
	int32 PlayerId 		= 1; // 好友玩家Id
	string Name 			= 2; // 好友名称
	int32 Score 			= 3; // 好友积分
	string Head			= 4; // 好友头像
}

// 服务器向客户端返回好友列表
message S2CRetFriendListResult {
	int32 FriendType 		= 1; // 好友类型
	repeated FriendInfo FriendList 	= 2; // 好友列表
	repeated FriendReq Reqs 		= 3; // 加好友请求
	int32 LeftGivePointsNum= 4; // 剩余赠送次数
}

// 服务器通知好友状态
message S2CFriendStateNotify {
	int32 StateType 		= 1; // 0 更新  1 增加 
	FriendInfo Info 		= 2; // 好友数据
}

// 服务器通知好友请求
message S2CFriendReqNotify {
	FriendReq Req 			= 1;
}

// 客户端通过Id加好友
message C2SAddFriendByPId {
	int32 PlayerId 		= 1; // 玩家Id
}

// 客户端通过昵称加好友
message C2SAddFriendByName {
	string Name 			= 1; // 玩家账号
}

// 服务器回复添加好友
message S2CAddFriendResult {
	int32 PlayerId 		= 1;
}

// 客户端同意加好友
message C2SAgreeFriend {
	int32 PlayerId 		= 1; // 玩家Id
}

// 服务器返回增加好友回复
message S2CAgreeFriendResult {
	int32 PlayerId 		= 1; // 好友玩家Id
	string Name 			= 2; // 好友名称
	int32 Score 			= 3; // 好友积分
	int32 Level			= 4; // 等级
	string Head			= 5; // 头像
	int32 VipLevel		  	= 6; // VIP等级
	int32 LastLogin		= 7; // 上次登陆时间
}

// 客户端拒绝加好友
message C2SRefuseFriend {
	int32 PlayerId 		= 1; // 玩家Id
}

// 服务器通知拒绝加好友
message S2CRefuseFriendResult {
	string Name 			= 1; // 对方名字
	int32 PlayerId			= 2; // 对方ID
}

// 客户端删除好友
message C2SRemoveFriend {
	int32 PlayerId 		= 1; // 玩家id
}

// 服务器通知客户端删除好友
message S2CRemoveFriendResult {
	int32 PlayerId 		= 1; // 好友Id
}

// 赠送友情点
message C2SGiveFriendPoints {
	repeated int32 FriendId 		= 1;
}

message FriendPointsResult {
	int32 FriendId 		= 1;
	int32 Points 			= 2;
	int32 Error			= 3; // 0成功  小于0表示错误码
	int32 RemainSeconds	= 4; // 剩余友情点赠送时间
	bool IsTodayGive		= 5; // 今天是否已赠送
	int32 BackPoints		= 6; // 回馈友情点
}

message S2CGiveFriendPointsResult {
	repeated FriendPointsResult PointsData = 1; // 赠送友情点数据
	int32 LeftGivePointsNum 	   = 2; // 剩余赠送次数
}

// 收取友情点
message C2SGetFriendPoints {
	repeated int32 FriendId 		= 1;
}
message FriendPoints {
	int32 FriendId 		= 1;
	int32 Points 			= 2;
}
message S2CGetFriendPointsResult {
	repeated FriendPoints PointsData = 1;
}

// 客户端给好友发送消息
message C2SFriendChat {
	int32 PlayerId = 1; // 玩家Id
	bytes Content 	= 2; // 聊天内容
}
message S2CFriendChatResult {
	int32 PlayerId = 1; // 玩家Id
	bytes Content 	= 2; // 聊天内容
}

// 获取好友未读消息数量
message C2SFriendGetUnreadMessageNum {
	repeated int32 FriendIds 	= 1; // 好友ID
}
message FriendUnreadMessageNumData {
	int32 FriendId     = 1; // 好友ID
	int32 MessageNum 	= 2; // 未读消息数量
}
message S2CFriendGetUnreadMessageNumResult {
	repeated FriendUnreadMessageNumData Data = 1;
}

// 拉取好友未读聊天消息
message C2SFriendPullUnreadMessage {
	int32 FriendId = 1; // 好友ID
}
message FriendChatData {
	bytes Content 	= 1; // 内容
	int32 SendTime = 2; // 发送时间
}
message S2CFriendPullUnreadMessageResult {
	int32 FriendId 		= 1; // 好友ID
	repeated FriendChatData Data 	= 2; // 聊天数据
}

// 确认聊天未读消息
message C2SFriendConfirmUnreadMessage {
	int32 FriendId  	= 1; // 好友ID
	int32 MessageNum 	= 2; // 消息条数
}
message S2CFriendConfirmUnreadMessageResult {
	int32 FriendId		= 1; // 好友ID
	int32 MessageNum 	= 2; // 消息条数
}

// 客户端请求好友在线状态
message C2SGetOnlineFriends {
	int32 Key = 1; //  好友类型 1好友 2是关注 3是粉丝
}

// 服务器返回在线好友
message S2CRetOnlineFriends {
	repeated int32 PlayerIds = 1; // 在线好友Id
	int32 Key = 2; //  好友类型 1好友 2是关注 3是粉丝
}

////////////////// shop ///////////////////////
// 请求商店商品
message C2SShopItems {
	int32 shop_id = 1; // 商店ID
}
message S2CShopItem {
	int32 item_id = 1; // 商店ID
	int32 left_num = 2; //剩余数量
	int32 remain_seconds = 3; // 剩余时间(秒)
}
message S2CShopItemsResult {
	int32 shop_id = 1;
	repeated S2CShopItem items = 2;
}

// 购买商店物品
message C2SBuyShopItem {
	int32 item_id 		= 1; // 商品ID
	int32 item_num 	= 2; // 商品数量
}

// 购买返回的物品
message S2CBuyShopItemResult {
	int32 shop_id 			= 1; // 商店ID
	int32 item_id 			= 2; // 商品ID
	int32 item_num			= 3; // 商品数量
	ItemInfo add_item 		= 4; // 买到的物品
	//ResourceInfo cost_res 	= 5; // 花费的物品资源
}
// 通知客户端商店需要刷新
message S2CShopNeedRefreshNotify {
}
////////////////////////////////////////////////

// ----------------------------------------------

// 日常任务数据
message DialyTaskData {
	int32 TaskId = 1; // 任务Id
	int32 TaskValue = 2; // 任务值
	int32 TaskState = 3; // 任务状态 0 未完成 1 完成 2 已领奖
	//int32 RewardUnix = 4; // 领取奖励时间戳 如果大于零则表示已经领奖
}

// 客户端向服务器请求日常任务数据
message C2SGetDialyTaskInfo {
}

// 服务器向客户端发送任务数据
message S2CSyncDialyTask {
	repeated DialyTaskData TaskList = 1; // 任务数据
}

// 服务器向客户端通知任务值变化
message S2CNotifyTaskValueChg {
	int32 TaskId = 1; // 任务Id
	int32 TaskValue = 2; // 任务值
	int32 TaskState = 3; // 任务状态  0 未完成 1 完成 2 已领奖
}

// 成就数据
message AchieveData {
	int32 AchieveId = 1; // 任务Id
	int32 AchieveValue = 2; // 任务数据
	int32 AchieveState = 3; // 任务状态  0 未完成 1 完成 2 已领奖
	//int32 RewardUnix = 4; // 领取奖励时间戳 如果大于零则表示已经领奖
}

// 客户端向服务器请求成就数据
message C2SGetAchieve {
}

// 服务器向客户端发送成就数据
message S2CSyncAchieveData {
	repeated AchieveData AchieveList = 1; // 成就任务数据
}

// 服务器向客户端通知成就值变化
message S2CNotifyAchieveValueChg {
	int32 AchieveId = 1; // 任务Id
	int32 AchieveValue = 2; // 任务值
	int32 AchieveState = 3; // 任务状态  0 未完成 1 完成 2 已领奖
}

// 客户端向服务器请求日常任务奖励
message C2SGetTaskReward {
	int32 TaskId = 1;
}

// 服务器向客户端发送任务结果
message S2CRetTaskReward {
	int32 TaskId = 1; // 任务Id
	int32 Coin = 2; // 金币
	int32 Diamond = 3; // 钻石奖励
	int32 Exp = 4; // 当前经验
	int32 CurLvl = 5; // 当前等级
}

// 客户端向服务器请求成就奖励
message C2SGetAchieveReward {
	int32 AchieveReward = 1; // 成就Id
}

// 服务器向客户端完成成就
message S2CRetAchieveReward {
	int32 TaskId = 1; // 任务Id
	int32 Coin = 2; // 金币
	int32 Diamond = 3; // 钻石奖励
	int32 Exp = 4; // 当前经验
	int32 CurLvl = 5; // 当前等级
}

// ----------------------------------------------------------------------------
// 发送世界聊天消息
message C2SWorldChatSend {
	bytes Content				= 1;
}
message S2CWorldChatSendResult {
	bytes Content				= 1;
}

// 拉取世界聊天消息
message C2SWorldChatMsgPull {
}
message WorldChatItem {
	bytes Content 				= 1;
	int32 PlayerId				= 2;
	string PlayerName			= 3;
	string PlayerHead			= 4;
	int32 PlayerLevel			= 5;
	int32 IsZaned				= 6;
	int32 IsFriend				= 7;
	int32 SendTime				= 8;
}
message S2CWorldChatMsgPullResult {
	repeated WorldChatItem Items		= 1; 
}

// 返回世界聊天封禁时间
message S2CWorldChatForbid {
	string EndTime = 1; // 封禁结束时间
}

// 服务器向客户端同步引导数据
message S2CSyncGuideData {
	repeated int32 GuideIds = 1; // 引导数据
}

// 客户端向服务器存储引导数据
message C2SSaveGuideData {
	int32 GuideId = 1; // 引导Id
}

// 服务器向客户端返回引导存储
message S2CRetSaveGuideData {
	int32 GuideId = 1; // 引导Id
}

